- name: test-reference-files-dry-run
  tags:
    - dry-run
    - hamlet
    - reference
  command: >
    snakemake -n
    --snakefile utilities/deps/Snakefile
    --workflow-profile test
  stdout:
    contains:
      - rule copy_arriba_database
      - rule split_seamless

- name: test-hamlet-table-modules
  tags:
    - hamlet
    - utilities
  command: >
    bash -c "
    # Test snv module output

    fname=test/data/output/v2/snv-indels-output.json

    python3 utilities/hamlet_table.py variant ${fname}> variants.tsv

    # Test fusion module output

    fname=test/data/output/v2/fusion-output.json

    python3 utilities/hamlet_table.py fusion ${fname}> fusion.tsv
    "
